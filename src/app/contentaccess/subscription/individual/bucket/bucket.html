<div ng-controller="BucketController">
	<style>
		/* Ensure form controls have sufficient contrast (3:1 minimum) */
		.checkbox input[type="checkbox"] {
			width: 18px;
			height: 18px;
			border: 2px solid #767676 !important;
			margin-right: 8px;
		}
		
		.radio input[type="radio"] {
			width: 18px;
			height: 18px;
			border: 2px solid #767676 !important;
		}
		
		/* Buttons with sufficient border contrast */
		.btn {
			border: 2px solid #767676 !important;
		}
		
		.btn-default,
		.btn-default-tair {
			border-color: #495057 !important; /* Dark gray border - 9:1 contrast */
			background-color: #f8f9fa;
			color: #212529;
		}
		
		.btn-default:hover,
		.btn-default-tair:hover {
			border-color: #212529 !important;
			background-color: #e2e6ea;
		}
		
		.btn-primary,
		.btn-primary-tair {
			border-color: #004085 !important; /* Dark blue border */
		}
		
		.btn-success,
		.btn-success-tair {
			border-color: #155724 !important; /* Dark green border */
		}
		
		.btn:focus {
			outline: 2px solid #0056b3;
			outline-offset: 2px;
		}
	</style>
	<div class="row">
	  <div
		class="col-xs-12"
		style="float: none; margin-left: auto; margin-right: auto;"
	  >
		<form ng-submit="validateAndSubmit() && next('pay')">
		  <div class="row">
			<div class="col-xs-12 info-individual-text">
			  Check
			  <a
				href="#contentaccess/list?partnerId={{partnerId}}"
				target="_blank"
				>this list</a
			  >
			  to see if you already have access to {{partner.name}} through your
			  library. If your institution is subscribed and you are unable to
			  access a page, please contact us at
			  <a href="mailto:info@phoenixbioinformatics.org"
				>info@phoenixbioinformatics.org</a
			  >
			</div>
		  </div>
		  <fieldset class="row">
			<legend class="col-xs-12 info-individual-text" style="margin-bottom: 10px">
			  {{partner.name}} bundles of usage units for individual use:
			</legend>
			<div class="col-xs-12" style="margin-left: 15px;">
				<div
				  class="radio"
				  ng-repeat="sub in subscriptions"
				  style="margin-bottom: 18px;"
				>
				  <label class="info-individual-text" style="display: flex; align-items: flex-start; gap: 10px; width: 100%;">
					<input
					  type="radio"
					  name="licenseoptions"
					  ng-model="$parent.bucketTypeId"
					  ng-value="{{ sub.bucketTypeId }}"
					  ng-change="setSelectedSubscriptionBucket(sub.bucketTypeId, sub.partnerId, sub.units, sub.price, sub.description, sub.discountPercentage)"
					  required
					  aria-required="true"
					  style="margin-top: 2px;"
					/>
					<div>
						<div style="font-weight: 500;">{{ sub.description }}</div>
						<div style="margin-left: 2px; margin-top: 2px;">
							<span ng-if="sub.discountPercentage > 0">
								<span class="visually-hidden">Previous price: </span>
								<s>${{ sub.price }} (USD)</s>
								&nbsp;
								<span class="visually-hidden">Current price: </span>
								<span style="font-weight: bold;">
									${{ sub.price - (sub.price * sub.discountPercentage / 100) }} (USD)
									(${{sub.discountPercentage}}% off first annual purchase)
								</span>
							</span>
							<span ng-if="!sub.discountPercentage || sub.discountPercentage === 0">
								${{ sub.price }} (USD)
							</span>
						</div>
					</div>
				  </label>
				</div>
			</div>
		  </fieldset>
		  <div class="row">
			<div class="col-xs-12">
			  <div class="checkbox">
				<label class="info-individual-text">
				  <input type="checkbox" value="" ng-model="userbool" required aria-required="true" />
				  My employer is an academic institution, a not-for-profit
				  research institution, or a government laboratory. <span aria-hidden="true">*</span>
				</label>
			  </div>
			  <div class="checkbox">
				<label class="info-individual-text">
				  <input type="checkbox" value="" ng-model="termsbool" required aria-required="true" />
				  I agree to
				  <a href="{{partner.termOfServiceUri}}" target="_blank"
					>Terms of Use</a
				  > <span aria-hidden="true">*</span>
				</label>
			  </div>
			</div>
		  </div>
		  <div class="row" style="height: 44px;"></div>
		  <div class="row">
			<div class="col-xs-12 text-center info-individual-subtotal">
			  Subtotal: ${{ get_total_buckets_price()|number:2 }} (USD)
			</div>
		  </div>
		  <span style="color: red;">{{errors}}</span>
		  <div class="row">
			<div class="col-xs-12 col-sm-4 text-center" style="margin-bottom: 10px;">
			  <button
				type="button"
				class="btn btn-default btn-default-tair"
				ng-click="switchTab('landing')"
				style="width: 100%; max-width: 200px;"
			  >
				BACK
			  </button>
			</div>
			<div class="col-xs-12 col-sm-4 text-center" style="margin-bottom: 10px;">
			  <button
				type="button"
				class="btn btn-default btn-default-tair"
				ng-click="reset()"
				style="width: 100%; max-width: 200px;"
			  >
				RESET FORM
			  </button>
			</div>
			<div class="col-xs-12 col-sm-4 text-center" style="margin-bottom: 10px;">
			  <button
				type="submit"
				class="btn"
				ng-class=" validate() ? 'btn-success btn-success-tair' : 'btn-primary btn-primary-tair' "
				style="width: 100%; max-width: 200px;"
			  >
				NEXT
			  </button>
			</div>
		  </div>
		</form>
	  </div>
	</div>
  </div>
  